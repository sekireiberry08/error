<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Surprise Visual Novel</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background-color: #ffe6f0;
      font-family: "Segoe UI", sans-serif;
      color: #880e4f;
      overflow: hidden;
      user-select: none;
    }

    .container {
      width: 100vw;
      height: 100vh;
      position: relative;
      background: url("bg.jpg") no-repeat center center/cover;
    }

    .character {
      position: absolute;
      bottom: 180px;
      left: 50%;
      transform: translateX(-50%);
      max-height: 50%;
      object-fit: contain;
      transition: opacity 0.5s ease-in-out;
    }

    .background-blur-img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80vw;
      max-height: 80vh;
      filter: blur(10px) brightness(1.2);
      z-index: 1;
      pointer-events: none;
      opacity: 0.6;
    }
    .character {
      z-index: 2; /* nhÃ¢n váº­t náº±m trÃªn */
    }
    .dialogue-box {
      z-index: 3;
    }

    .ripple {
      position: absolute;
      border-radius: 50%;
      transform: scale(0);
      animation: ripple-animation 0.6s linear;
      background: rgba(255, 105, 180, 0.4); /* há»“ng pastel nháº¹ */
      pointer-events: none;
      z-index: 10;
    }

    @keyframes ripple-animation {
      to {
        transform: scale(6);
        opacity: 0;
      }
    }

    .dialogue-box {
      position: absolute;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 240, 245, 0.95);
      padding: 20px 30px;
      width: 80%;
      max-width: 600px;
      border-radius: 20px;
      box-shadow: 0 5px 20px rgba(255, 105, 180, 0.3);
    }

    .dialogue-line {
      font-size: 1.2rem;
      line-height: 1.6;
      white-space: pre-wrap;
      min-height: 1.5em;
    }

    #continue-indicator {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      color: #d63384;
      font-size: 1rem;
      font-style: italic;
      display: none;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    #choices {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 5;
    }

    audio {
      display: none;
    }

    .twinkle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      opacity: 0.7;
      border-radius: 50%;
      animation: twinkle 2s infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.4); }
    }

    .fullscreen-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 4;
      display: none;
    }

  </style>
</head>
<body onclick="nextScene()">
  <audio id="bgm" autoplay loop>
    <source src="bgm.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <div class="container">
    <img id="character-img" class="character" src="pic1.jpg" alt="Character" />
    <img id="bg-blur" class="background-blur-img" src="" alt="Blurred background" />
    <img id="fullscreen-img" class="fullscreen-img" src="" alt="Fullscreen" />
    <div class="dialogue-box" id="dialogue-box">
      <p id="dialogue-line" class="dialogue-line"></p>
      <p id="continue-indicator">áº¤n Ä‘á»ƒ tiáº¿p tá»¥c...</p>
    </div>
    <div id="choices"></div>
  </div>

  <script>
    const scenes = {
      s1: {
        img: "pic1.png",
        lines: ["Gá»­i Ngá»c TrÃ¢m â€“ â€œRan Moriiiâ€ cá»§a anh,"],
        next: "s2"
      },
      s2: {
        img: "pic2.png",
        lines: [
          "HÃ´m nay lÃ  má»™t ngÃ y tháº­t Ä‘áº·c biá»‡t â€“ 500 ngÃ y ká»ƒ tá»« khi anh vÃ  em chÃ­nh thá»©c bÆ°á»›c vÃ o cuá»™c Ä‘á»i cá»§a nhau.",
          "500 ngÃ y khÃ´ng quÃ¡ dÃ i so vá»›i cáº£ má»™t Ä‘á»i ngÆ°á»i, nhÆ°ng vá»›i anh, Ä‘Ã³ lÃ  500 ngÃ y anh Ä‘Æ°á»£c sá»‘ng trá»n váº¹n nháº¥t, áº¥m Ã¡p nháº¥t vÃ  háº¡nh phÃºc nháº¥t."
        ],
        next: "s3"
      },
      s3: {
        img: "pic3.png",
        lines: [
          "Anh váº«n nhá»› nhÆ° in ngÃ y Ä‘áº§u tiÃªn anh Ä‘á»ƒ Ã½ Ä‘áº¿n em, Ä‘áº¿n giá»ng voice cÃ³ khi Ä‘áº§y quyáº¿n rÅ©, cÃ³ khi láº¡i nhÃ­ nháº£nh Ä‘Ã¡ng yÃªu.",
          "Tháº­t sá»± em Ä‘Ã£ cháº¡m pháº£i trÃ¡i tim anh ngay tá»« khi em cháº¥p nháº­n lá»i má»i káº¿t báº¡n."
        ],
        next: "s4"
      },
      s4: {
        img: "pic4.png",
        lines: [
          "Rá»“i cÃ²n nhá»› nhá»¯ng láº§n chá»Ÿ nhau vi vu kháº¯p SÃ i GÃ²n dÆ°á»›i mÆ°a, nhá»¯ng buá»•i tá»‘i dÃ i trÃ² chuyá»‡n cháº³ng biáº¿t chÃ¡n...",
          "Hay nhá»¯ng lÃºc giáº­n dá»—i vu vÆ¡ rá»“i cÃ¡i tÃ´i anh láº¡i giá»Ÿ chá»©ng cao hÆ¡n chiá»u cao cá»§a anh =))))))â€¦",
          "Táº¥t cáº£ Ä‘á»u lÃ  nhá»¯ng máº£nh ghÃ©p tuyá»‡t vá»i nháº¥t trong cuá»™c Ä‘á»i anh."
        ],
        next: "s5"
      },
      s5: {
        img: "pic5.png",
        lines: [
          "Em biáº¿t khÃ´ng? Má»—i sÃ¡ng thá»©c dáº­y, anh Ä‘á»u tháº§m cáº£m Æ¡n vÃ¬ em Ä‘Ã£ á»Ÿ bÃªn anh.",
          "YÃªu khÃ´ng pháº£i lÃ  tÃ¬m kiáº¿m má»™t ngÆ°á»i hoÃ n háº£o, mÃ  lÃ  tháº¥y sá»± hoÃ n háº£o trong má»™t ngÆ°á»i khÃ´ng hoÃ n háº£o nhÆ° em."
        ],
        next: "s6"
      },
      s6: {
        img: "pic6.png",
        lines: [
          "500 ngÃ y qua, chÃºng ta Ä‘Ã£ cÃ¹ng nhau tráº£i qua bao nhiÃªu cung báº­c cáº£m xÃºc.",
          "DÃ¹ 500 ngÃ y hay 50 nÄƒm ná»¯a, tay em váº«n sáº½ trong tay anh, cÃ¹ng nhau Ä‘i qua nhá»¯ng thÄƒng tráº§m.",
          "Anh biáº¿t em váº«n yÃªu anh báº±ng cáº£ trÃ¡i tim, vÃ  viá»‡c cá»§a anh lÃ  náº¯m tay em Ä‘áº¿n lá»… Ä‘Æ°á»ng chÃºng ta mong Æ°á»›c."
        ],
        next: "s7"
      },
      s7: {
        img: "pic1.png",
        lines: [
          "Cáº£m Æ¡n em vÃ¬ Ä‘Ã£ chá»n anh. DÃ¹ Ä‘Ã´i khi anh cÃ²n vá»¥ng vá»...",
          "Anh há»©a sáº½ luÃ´n cá»‘ gáº¯ng háº¿t sá»©c Ä‘á»ƒ em khÃ´ng bao giá» há»‘i háº­n khi Ä‘Ã£ trao trÃ¡i tim cho anh.",
          "TÃªn coder kiÃªm thÃ¡m tá»­ buá»“n ngá»§ cá»§a em bÃ©, Quá»‘c An."
        ],
        next: "s8"
      },
      s8: {
        img: "pic7.png",
        lines: ["Em cÃ³ muá»‘n cÃ¹ng anh Ä‘i háº¿t cháº·ng Ä‘Æ°á»ng tÆ°Æ¡ng lai trong suá»‘t thá»i gian tá»›i khÃ´ng?"],
        choices: [
          { text: "Táº¥t nhiÃªn lÃ  cÃ³ ráº¥t nhiá»u rá»“iiii", next: "love1" },
          { text: "CÃ³ chá»©, Ä‘á»“ ngá»‘c!", next: "love2" },
          { text: "KhÃ´ng... ðŸ˜…", next: "joke" }
        ]
      },
      love1: {
        img: "pic1.png",
        lines: ["Yesssss, anh cÅ©ng yÃªu em ráº¥t nhiá»u â¤ï¸"],
        next: "ending"
      },
      love2: {
        img: "pic1.png",
        lines: ["Muaheheee anh cÅ©ng yÃªu em láº¯m Ã¡ â¤ï¸"],
        next: "ending"
      },
      joke: {
        img: "pic8.png",
        lines: ["Anh tin em sáº½ khÃ´ng chá»n lá»±a chá»n nÃ y Ä‘Ãºng khÃ´ng...? ðŸ¥º"],
        next: "ending"
      },
      ending: {
        img: "ending_bg.jpg",
        lines: ["ðŸŽ‰ Happy 500 days anniversary! ðŸŽ‰"],
        choices: [
          { text: "ðŸ’Œ áº¤n Ä‘á»ƒ xem toÃ n bá»™ thÆ° do anh viáº¿t", next: "letter" }
        ]
      },
      letter: {
        img: "letter.jpg",
        lines: [],
      }
    };

    let currentSceneId = "s1";
    let currentLine = 0;
    let typing = false;

    const characterImg = document.getElementById("character-img");
    const dialogueLine = document.getElementById("dialogue-line");
    const continueIndicator = document.getElementById("continue-indicator");

    let currentText = "";   // LÆ°u cÃ¢u hiá»‡n táº¡i
    let typeInterval = null; // LÆ°u interval Ä‘á»ƒ cÃ³ thá»ƒ dá»«ng láº¡i

    function typeText(text, callback) {
      typing = true;
      currentText = text;             // LÆ°u láº¡i toÃ n bá»™ cÃ¢u
      dialogueLine.textContent = "";
      continueIndicator.style.display = "none";
      let index = 0;

      clearInterval(typeInterval);    // Dá»«ng má»i interval cÅ©
      typeInterval = setInterval(() => {
        if (index < text.length) {
          dialogueLine.textContent += text.charAt(index);
          index++;
        } else {
          clearInterval(typeInterval);
          typing = false;
          continueIndicator.style.display = "block";
          if (callback) callback();
        }
      }, 40);
    }


    function showScene(id) {
      currentSceneId = id;
      currentLine = 0;
      const scene = scenes[id];

      characterImg.src = scene.img;
      characterImg.style.display = "block";
      document.getElementById("fullscreen-img").style.display = "none";

      if (id === "ending" || id === "letter") {
        // Fullscreen image
        document.getElementById("fullscreen-img").src = scene.img;
        document.getElementById("fullscreen-img").style.display = "block";
        characterImg.style.display = "none";
        document.getElementById("dialogue-box").style.display = "none";
      } else {
        document.getElementById("dialogue-box").style.display = "block";
      }

      if (scene.lines && scene.lines.length > 0) {
        typeText(scene.lines[0]);
      } else {
        dialogueLine.textContent = "";
        continueIndicator.style.display = "none";
      }

      document.getElementById("choices").style.display = "none";
      document.getElementById("choices").innerHTML = "";
    }

    document.body.addEventListener("click", function (e) {
      const ripple = document.createElement("div");
      ripple.className = "ripple";
      ripple.style.left = `${e.clientX}px`;
      ripple.style.top = `${e.clientY}px`;
      ripple.style.width = ripple.style.height = "100px";
      document.body.appendChild(ripple);
      setTimeout(() => ripple.remove(), 600);
    });


    function nextScene() {
      const scene = scenes[currentSceneId];

      if (typing) {
        clearInterval(typeInterval);            // Dá»«ng typing
        dialogueLine.textContent = currentText; // Hiá»‡n háº¿t cÃ¢u
        typing = false;
        continueIndicator.style.display = "block";
        return;
      }

      continueIndicator.style.display = "none";

      if (currentLine < scene.lines.length - 1) {
        currentLine++;
        typeText(scene.lines[currentLine]);
      } else if (scene.choices) {
        showChoices(scene.choices);
      } else if (scene.next) {
        showScene(scene.next);
      }
    }


    function createStars() {
      for (let i = 0; i < 80; i++) {
        const star = document.createElement("div");
        star.className = "twinkle";
        star.style.top = `${Math.random() * 100}vh`;
        star.style.left = `${Math.random() * 100}vw`;
        star.style.animationDelay = `${Math.random() * 3}s`;
        star.style.zIndex = 0;
        document.body.appendChild(star);
      }
    }

    function showChoices(choices) {
      const container = document.getElementById("choices");
      container.style.display = "block";
      container.innerHTML = "";

      choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice.text;
        btn.style.margin = "10px";
        btn.style.padding = "10px 20px";
        btn.style.fontSize = "1rem";
        btn.style.borderRadius = "10px";
        btn.style.background = "#ff99cc";
        btn.style.border = "none";
        btn.style.color = "#fff";
        btn.style.cursor = "pointer";
        btn.onclick = () => {
          container.style.display = "none";
          showScene(choice.next);
        };
        container.appendChild(btn);
      });
    }

    window.onload = () => {
      document.getElementById("bgm").volume = 0.4;
      createStars();
      showScene("s1");
    };
  </script>
</body>
</html>
 <!--TÃªn áº£nh	Má»¥c Ä‘Ã­ch
pic1.jpg	Má»Ÿ Ä‘áº§u thÆ° gá»­i Ngá»c TrÃ¢m
pic2.jpg	Ká»· niá»‡m 500 ngÃ y yÃªu nhau
pic3.jpg	Nhá»› láº§n Ä‘áº§u voice
pic4.jpg	Nhá»› cÃ¡c ká»· niá»‡m dá»—i há»n
pic5.jpg	Lá»i cáº£m Æ¡n vÃ  yÃªu thÆ°Æ¡ng
pic6.jpg	Lá»i há»©a dÃ i lÃ¢u
pic7.jpg	Tá» tÃ¬nh + lá»±a chá»n-->